 ç¬¬äºŒæ­¥ï¼šå»ºç«‹ LIFF è¨»å†Šé é¢ /liff/register
âœ… åŠŸèƒ½éœ€æ±‚
è‡ªå‹•æ“·å–ä½¿ç”¨è€… LINE userId

é¡¯ç¤ºå¡«å¯«æ¬„ä½ï¼ˆnameã€è‹±æ–‡åã€ç”Ÿæ—¥ã€æ‰‹æ©Ÿã€åœ°å€...ï¼‰

æäº¤è‡³ /api/liff/register API å¯«å…¥æœƒå“¡è³‡æ–™

æˆåŠŸå¾Œé¡¯ç¤ºè¨»å†Šå®Œæˆé é¢æˆ–å°å›é¦–é 

ğŸ§± é é¢çµæ§‹èªªæ˜
ğŸ“ æª”æ¡ˆä½ç½®ï¼š
cpp
è¤‡è£½
ç·¨è¼¯
/public/liff/register.html
ğŸ“„ å»ºè­°å…§å®¹ï¼ˆregister.htmlï¼‰
æˆ‘å°‡æä¾›å®Œæ•´ HTML è¡¨å–®ï¼ˆå…§å« LIFF åˆå§‹åŒ–ã€æ¬„ä½ã€è‡ªå‹•æŠ“ UIDã€é€å‡ºï¼‰ï¼š

html
è¤‡è£½
ç·¨è¼¯
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>æœƒå“¡è¨»å†Š</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <h2>æœƒå“¡è¨»å†Š</h2>
  <form id="register-form">
    <input type="hidden" id="line_user_id" name="line_user_id" required>
    <label>ä¸­æ–‡å§“åï¼š<input type="text" name="name" required></label><br>
    <label>è‹±æ–‡å§“åï¼š<input type="text" name="english_name"></label><br>
    <label>ç”Ÿæ—¥ï¼š<input type="date" name="birthday" required></label><br>
    <label>è·æ¥­ï¼š<input type="text" name="job_title" required></label><br>
    <label>æ‰‹æ©Ÿï¼š<input type="text" name="mobile" required></label><br>
    <label>å‚³çœŸï¼š<input type="text" name="fax"></label><br>
    <label>åœ°å€ï¼š<input type="text" name="address" required></label><br>
    <label>Emailï¼š<input type="email" name="email" required></label><br>
    <button type="submit">é€å‡º</button>
  </form>

  <script>
    async function main() {
      await liff.init({ liffId: "ä½ çš„LIFF ID" });
      const profile = await liff.getProfile();
      document.getElementById('line_user_id').value = profile.userId;
    }

    document.getElementById('register-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const json = Object.fromEntries(formData.entries());
      const res = await fetch('/api/liff/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(json)
      });

      if (res.ok) {
        alert("è¨»å†ŠæˆåŠŸï¼");
        liff.closeWindow();
      } else {
        const err = await res.text();
        alert("è¨»å†Šå¤±æ•—ï¼š" + err);
      }
    });

    main();
  </script>
</body>
</html>
âœ… æ¥ä¸‹ä¾†ä½ è¦åšçš„äº‹ï¼š
ğŸ“Œ æ›¿æ› ä½ çš„LIFF ID ç‚ºä½ çš„å¯¦éš› LIFF IDï¼š
ä¾‹å¦‚ï¼š

js
è¤‡è£½
ç·¨è¼¯
await liff.init({ liffId: "2007739371-aKePV20" });