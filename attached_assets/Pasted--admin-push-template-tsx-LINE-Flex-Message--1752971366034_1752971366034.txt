æˆ‘å€‘ä¾†å»ºç«‹ /admin/push-template.tsx é é¢ï¼Œæ”¯æ´è‡ªè¨‚ LINE Flex Message æ¨£æ¿è¨­è¨ˆèˆ‡å³æ™‚é è¦½ã€‚

âœ… é é¢çµæ§‹è¨­è¨ˆ
ç•«é¢åˆ†å·¦å³å…©æ¬„ï¼š

å€å¡Š	åŠŸèƒ½èªªæ˜
ğŸ“‹ å·¦å´	Flex Message JSON ç·¨è¼¯å™¨ï¼ˆèªæ³•é«˜äº®ã€å³æ™‚æ›´æ–°ï¼‰
ğŸ‘ï¸ å³å´	Flex Message é è¦½æ¨¡æ“¬å€ï¼ˆè‡ªè£½æˆ–å¥—ç”¨ LINE Web æ¸²æŸ“å™¨ï¼‰

âœ… å¥—ä»¶å®‰è£ï¼ˆReplit å¯ç”¨ï¼‰
bash
è¤‡è£½
ç·¨è¼¯
npm install react-ace ace-builds
æˆ– yarnï¼š

bash
è¤‡è£½
ç·¨è¼¯
yarn add react-ace ace-builds
âœ… Flex Message æ¨£æ¿ç¯„ä¾‹ï¼ˆæ´»å‹•å ±åˆ°é€šçŸ¥ï¼‰
ts
è¤‡è£½
ç·¨è¼¯
const defaultTemplate = {
  type: "bubble",
  hero: {
    type: "image",
    url: "https://example.com/banner.jpg",
    size: "full",
    aspectRatio: "20:13",
    aspectMode: "cover"
  },
  body: {
    type: "box",
    layout: "vertical",
    contents: [
      { type: "text", text: "æ´»å‹•å ±åˆ°æé†’", weight: "bold", size: "lg" },
      { type: "text", text: "è«‹æ–¼ä»Šå¤© 18:00 å‰å®Œæˆå ±åˆ°", wrap: true, size: "sm", color: "#888888" },
    ]
  },
  footer: {
    type: "box",
    layout: "horizontal",
    contents: [
      {
        type: "button",
        style: "primary",
        action: {
          type: "uri",
          label: "ç«‹å³å ±åˆ°",
          uri: "https://liff.line.me/12345678"
        }
      }
    ]
  }
};
âœ… å®Œæ•´é é¢ /admin/push-template.tsx
tsx
è¤‡è£½
ç·¨è¼¯
import { useState } from "react";
import AceEditor from "react-ace";
import "ace-builds/src-noconflict/mode-json";
import "ace-builds/src-noconflict/theme-github";

// ğŸ‘‡ Mock Flex Render
const FlexPreview = ({ data }: { data: any }) => {
  if (!data) return <div className="text-sm text-gray-500">ç„¡è³‡æ–™</div>;

  return (
    <div className="p-4 bg-white border rounded shadow w-[280px] text-sm">
      <div className="font-bold mb-2">{data.body?.contents?.[0]?.text || "Flex é è¦½"}</div>
      <div className="text-gray-700 mb-4">{data.body?.contents?.[1]?.text || "å…§å®¹..."}</div>
      <a
        href={data.footer?.contents?.[0]?.action?.uri}
        target="_blank"
        className="bg-blue-600 text-white px-4 py-1 rounded text-center block"
      >
        {data.footer?.contents?.[0]?.action?.label || "å‰å¾€"}
      </a>
    </div>
  );
};

const PushTemplatePage = () => {
  const [jsonText, setJsonText] = useState(JSON.stringify(defaultTemplate, null, 2));
  const [parsed, setParsed] = useState<any>(defaultTemplate);
  const [error, setError] = useState("");

  const handleChange = (value: string) => {
    setJsonText(value);
    try {
      const obj = JSON.parse(value);
      setParsed(obj);
      setError("");
    } catch (e: any) {
      setError(e.message);
    }
  };

  return (
    <div className="flex h-screen">
      {/* JSON ç·¨è¼¯å™¨ */}
      <div className="w-1/2 p-4 border-r">
        <h1 className="text-lg font-bold mb-2">âœï¸ Flex Message æ¨£æ¿ç·¨è¼¯</h1>
        <AceEditor
          mode="json"
          theme="github"
          width="100%"
          height="calc(100vh - 100px)"
          value={jsonText}
          onChange={handleChange}
          fontSize={14}
          setOptions={{ useWorker: false }}
        />
        {error && <div className="text-red-600 mt-2 text-sm">âŒ JSON éŒ¯èª¤ï¼š{error}</div>}
      </div>

      {/* é è¦½å€ */}
      <div className="w-1/2 p-4 bg-gray-50">
        <h1 className="text-lg font-bold mb-2">ğŸ‘ï¸ å³æ™‚é è¦½</h1>
        <FlexPreview data={parsed} />
      </div>
    </div>
  );
};

export default PushTemplatePage;
âœ… å·²å®ŒæˆåŠŸèƒ½ï¼š
âœï¸ æ”¯æ´ç·¨è¼¯ Flex Message æ¨£æ¿ï¼ˆå³æ™‚ JSON é©—è­‰ï¼‰

ğŸ‘ï¸ æ¨¡æ“¬é è¦½å³å´å³æ™‚æ›´æ–°ï¼ˆå¯å¾ŒçºŒå¼·åŒ–æ¨£å¼ï¼‰

âœ… æ”¯æ´å­˜ç‚º æ´»å‹•é è¨­æ¨£æ¿ æˆ–æ¸¬è©¦æ¨æ’­ï¼ˆå¾…ä¸‹éšæ®µï¼‰

