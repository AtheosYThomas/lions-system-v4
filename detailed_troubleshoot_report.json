{
  "timestamp": "2025-07-18T14:53:58.352Z",
  "summary": {
    "totalIssues": 4,
    "errors": 3,
    "warnings": 0,
    "info": 1,
    "healthScore": 35
  },
  "issues": [
    {
      "category": "TypeScript編譯",
      "severity": "high",
      "issue": "TypeScript 編譯錯誤",
      "details": "src/integrations/line/lineService.ts(92,64): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\nsrc/integrations/line/lineService.ts(170,50): error TS2345: Argument of type '{ type: \"flex\"; altText: string; contents: { type: \"bubble\"; body: { type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; margin?: undefined; wrap?: undefined; } | { ...; } | { ...; })[]; }; footer: { ...; }; }; }' is not assignable to parameter of type 'Message | Message[]'.\n  Type '{ type: \"flex\"; altText: string; contents: { type: \"bubble\"; body: { type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; margin?: undefined; wrap?: undefined; } | { ...; } | { ...; })[]; }; footer: { ...; }; }; }' is not assignable to type 'FlexMessage'.\n    Type '{ type: \"flex\"; altText: string; contents: { type: \"bubble\"; body: { type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; margin?: undefined; wrap?: undefined; } | { ...; } | { ...; })[]; }; footer: { ...; }; }; }' is not assignable to type '{ type: \"flex\"; altText: string; contents: FlexContainer; }'.\n      Types of property 'contents' are incompatible.\n        Type '{ type: \"bubble\"; body: { type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; margin?: undefined; wrap?: undefined; } | { type: string; text: string; ... 4 more ...; wrap?: undefined; } | { ...; })[]; }; footer: { ...; }; }' is not assignable to type 'FlexContainer'.\n          Type '{ type: \"bubble\"; body: { type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; margin?: undefined; wrap?: undefined; } | { type: string; text: string; ... 4 more ...; wrap?: undefined; } | { ...; })[]; }; footer: { ...; }; }' is not assignable to type 'FlexBubble'.\n            Types of property 'body' are incompatible.\n              Type '{ type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; margin?: undefined; wrap?: undefined; } | { type: string; text: string; weight: string; size: string; margin: string; color?: undefined; wrap?: undefined; } | { ...; })[]; }' is not assignable to type 'FlexBox'.\n                Type '{ type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; margin?: undefined; wrap?: undefined; } | { type: string; text: string; weight: string; size: string; margin: string; color?: undefined; wrap?: undefined; } | { ...; })[]; }' is not assignable to type '{ type: \"box\"; layout: \"vertical\" | \"horizontal\" | \"baseline\"; contents: FlexComponent[]; backgroundColor?: string | undefined; borderColor?: string | undefined; borderWidth?: string | undefined; ... 16 more ...; background?: Background | undefined; }'.\n                  Types of property 'type' are incompatible.\n                    Type 'string' is not assignable to type '\"box\"'.\nsrc/integrations/line/lineService.ts(256,49): error TS2345: Argument of type '{ type: \"flex\"; altText: string; contents: { type: \"bubble\"; body: { type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; wrap?: undefined; margin?: undefined; } | { ...; } | { ...; })[]; }; footer: { ...; }; }; }' is not assignable to parameter of type 'Message | Message[]'.\n  Type '{ type: \"flex\"; altText: string; contents: { type: \"bubble\"; body: { type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; wrap?: undefined; margin?: undefined; } | { ...; } | { ...; })[]; }; footer: { ...; }; }; }' is not assignable to type 'FlexMessage'.\n    Type '{ type: \"flex\"; altText: string; contents: { type: \"bubble\"; body: { type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; wrap?: undefined; margin?: undefined; } | { ...; } | { ...; })[]; }; footer: { ...; }; }; }' is not assignable to type '{ type: \"flex\"; altText: string; contents: FlexContainer; }'.\n      Types of property 'contents' are incompatible.\n        Type '{ type: \"bubble\"; body: { type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; wrap?: undefined; margin?: undefined; } | { type: string; text: string; ... 4 more ...; margin?: undefined; } | { ...; })[]; }; footer: { ...; }; }' is not assignable to type 'FlexContainer'.\n          Type '{ type: \"bubble\"; body: { type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; wrap?: undefined; margin?: undefined; } | { type: string; text: string; ... 4 more ...; margin?: undefined; } | { ...; })[]; }; footer: { ...; }; }' is not assignable to type 'FlexBubble'.\n            Types of property 'body' are incompatible.\n              Type '{ type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; wrap?: undefined; margin?: undefined; } | { type: string; text: string; weight: string; size: string; color?: undefined; wrap?: undefined; margin?: undefined; } | { ...; })[]; }' is not assignable to type 'FlexBox'.\n                Type '{ type: string; layout: string; contents: ({ type: string; text: string; weight: string; size: string; color: string; wrap?: undefined; margin?: undefined; } | { type: string; text: string; weight: string; size: string; color?: undefined; wrap?: undefined; margin?: undefined; } | { ...; })[]; }' is not assignable to type '{ type: \"box\"; layout: \"vertical\" | \"horizontal\" | \"baseline\"; contents: FlexComponent[]; backgroundColor?: string | undefined; borderColor?: string | undefined; borderWidth?: string | undefined; ... 16 more ...; background?: Background | undefined; }'.\n                  Types of property 'type' are incompatible.\n                    Type 'string' is not assignable to type '\"box\"'.\nsrc/scripts/tools/fullSystemTest.ts(10,41): error TS2307: Cannot find module '../controllers/lineController' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(11,43): error TS2307: Cannot find module '../controllers/memberController' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(12,49): error TS2307: Cannot find module '../controllers/announcementController' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(13,44): error TS2307: Cannot find module '../controllers/checkinController' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(14,41): error TS2307: Cannot find module '../controllers/liffController' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(24,38): error TS2307: Cannot find module '../routes/line/webhook' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(25,39): error TS2307: Cannot find module '../routes/api/members' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(26,45): error TS2307: Cannot find module '../routes/api/announcements' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(27,40): error TS2307: Cannot find module '../routes/api/checkin' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(28,37): error TS2307: Cannot find module '../routes/api/liff' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(29,38): error TS2307: Cannot find module '../routes/admin' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(39,38): error TS2307: Cannot find module '../services/lineService' or its corresponding type declarations.\nsrc/scripts/tools/fullSystemTest.ts(49,33): error TS2307: Cannot find module '../models/index' or its corresponding type declarations.\nsrc/scripts/tools/quickStart.ts(4,24): error TS2307: Cannot find module '../config/config' or its corresponding type declarations.\nsrc/scripts/tools/quickStart.ts(5,23): error TS2307: Cannot find module '../config/database' or its corresponding type declarations.\nsrc/scripts/tools/quickStart.ts(7,25): error TS2307: Cannot find module '../routes/admin' or its corresponding type declarations.\nsrc/scripts/tools/quickStart.ts(8,26): error TS2307: Cannot find module '../routes/api/members' or its corresponding type declarations.\nsrc/scripts/tools/quickStart.ts(9,27): error TS2307: Cannot find module '../routes/api/checkin' or its corresponding type declarations.\nsrc/scripts/tools/quickStart.ts(10,24): error TS2307: Cannot find module '../routes/api/liff' or its corresponding type declarations.\nsrc/scripts/tools/quickStart.ts(11,32): error TS2307: Cannot find module '../routes/api/announcements' or its corresponding type declarations.\nsrc/scripts/tools/quickStart.ts(12,25): error TS2307: Cannot find module '../routes/line/webhook' or its corresponding type declarations.\nsrc/scripts/tools/testLineModule.ts(3,40): error TS2307: Cannot find module '../types/line' or its corresponding type declarations.\nsrc/scripts/tools/testLineModule.ts(40,34): error TS2307: Cannot find module '../routes/line/webhook' or its corresponding type declarations.\nsrc/scripts/tools/testLineWebhook.ts(4,24): error TS2307: Cannot find module '../config/config' or its corresponding type declarations.\nsrc/scripts/tools/testRoutesRefactor.ts(2,30): error TS2307: Cannot find module '../controllers/memberController' or its corresponding type declarations.\nsrc/scripts/tools/testRoutesRefactor.ts(3,36): error TS2307: Cannot find module '../controllers/announcementController' or its corresponding type declarations.\nsrc/scripts/tools/testRoutesRefactor.ts(4,31): error TS2307: Cannot find module '../controllers/checkinController' or its corresponding type declarations.\nsrc/scripts/tools/testRoutesRefactor.ts(5,28): error TS2307: Cannot find module '../controllers/liffController' or its corresponding type declarations.\nsrc/scripts/tools/testRoutesRefactor.ts(24,39): error TS2307: Cannot find module '../routes/api/members' or its corresponding type declarations.\nsrc/scripts/tools/testRoutesRefactor.ts(25,45): error TS2307: Cannot find module '../routes/api/announcements' or its corresponding type declarations.\nsrc/scripts/tools/testRoutesRefactor.ts(26,40): error TS2307: Cannot find module '../routes/api/checkin' or its corresponding type declarations.\nsrc/scripts/tools/testRoutesRefactor.ts(27,37): error TS2307: Cannot find module '../routes/api/liff' or its corresponding type declarations.\nsrc/services/index.ts(7,40): error TS2307: Cannot find module './lineService' or its corresponding type declarations.\nsrc/types/index.ts(9,42): error TS2305: Module '\"./payment\"' has no exported member 'PaymentRecord'.\nsrc/types/index.ts(9,57): error TS2305: Module '\"./payment\"' has no exported member 'PaymentTransaction'.\nsrc/types/index.ts(80,1): error TS2308: Module './registration' has already exported a member named 'PaymentStatus'. Consider explicitly re-exporting to resolve the ambiguity.\nsrc/types/role.ts(66,37): error TS2345: Argument of type 'Role' is not assignable to parameter of type 'Role.President | Role.Admin'.\nsrc/utils/diagnostics/index.ts(16,10): error TS2305: Module '\"./troubleshootReport\"' has no exported member 'createTroubleshootReport'.\nsrc/utils/diagnostics/index.ts(57,38): error TS2345: Argument of type '(DiagnosticResult | { database: boolean; models: boolean; env: boolean; errors: string[]; })[]' is not assignable to parameter of type 'DiagnosticResult[]'.\n  Type 'DiagnosticResult | { database: boolean; models: boolean; env: boolean; errors: string[]; }' is not assignable to type 'DiagnosticResult'.\n    Type '{ database: boolean; models: boolean; env: boolean; errors: string[]; }' is missing the following properties from type 'DiagnosticResult': component, status, message\nsrc/utils/index.ts(7,38): error TS2307: Cannot find module './envCheck' or its corresponding type declarations.\nsrc/utils/index.ts(8,37): error TS2307: Cannot find module './envValidation' or its corresponding type declarations.\n",
      "suggestion": "修正 TypeScript 語法錯誤",
      "status": "error"
    },
    {
      "category": "Routes",
      "severity": "low",
      "issue": "src/routes/api/liff.ts 使用環境變數但未載入 dotenv",
      "details": "可能導致環境變數未正確載入",
      "suggestion": "確認 dotenv 已在主程式載入",
      "status": "info"
    },
    {
      "category": "前端LIFF",
      "severity": "high",
      "issue": "LIFF App ID 未設定",
      "details": "public/liff.html 缺少 LIFF App ID",
      "suggestion": "設定正確的 LIFF App ID",
      "status": "error"
    },
    {
      "category": "LIFF服務",
      "severity": "high",
      "issue": "LIFF 服務未正確配置",
      "details": "Health Check 顯示 LIFF 服務狀態異常",
      "suggestion": "檢查 LIFF 應用程式設定",
      "status": "error"
    }
  ]
}